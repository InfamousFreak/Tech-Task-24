<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foodium Navbar</title>
    <link rel="stylesheet" href="customer.css">     
</head>
<body>
    <div id="alert" class="alert alert-success" role="alert">
        Logged in successfully!
      </div>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="navbar-container">
            <div class="navbar-links">
                <div class="bord"><a href="https://github.com/InfamousFreak">About Us</a></div>
                <a href="usermenu.html">Menu</a>
                <a href="cart.html">Cart</a>
                <a href="/logout">Logout</a>
            </div>
            <div class="navbar-title">
                <a href="customer.html">F<span style="color:#f27e3b">oo</span>diu<span style="color:#f27e3b">m</span></a>
            </div>
            <div class="navbar-search-profile">
                <img src="profile-icon.png" alt="Profile Icon" class="profile-icon" id="profile-button">
            </div>
        </div>
    </nav>
    <!-- User Details Section -->
    <div id="user-details" class="hidden">
        <h2>User Details</h2>
        <div class="user-category">
            <h3>Profile Information</h3>
            <p id="profile-info"></p>
            <button id="update-profile-butn">Update Profile</button>

        </div>
        <div class="user-category">
            <h3>Order History</h3>
            <button id="view-history-butn">View Order History</button>
            <div id="order-history"></div>
        </div>
        <div class="user-category">
            <h3>Settings</h3>
            <p id="settings"></p>
        </div>
    </div>


    <div class="hmpageimg"><h1>Fresh from the kitchen <br>to your doorstep an<br>easy dinign solution </h1>
    <h4>"Welcome to our Foodium! Enjoy delicious meals delivered to your doorstep."</h4></div>
    <div class="searchitem">                
        <input type="text" id="search-input" placeholder="Search tags..." >
        <span class="close-icon" id="close-icon">X</span>
        <button id="search-button">Go</button>
        
    </div>
        <!-- Search Results Section -->
        <div id="search-results" class="hidden">
            <h2>Search Results </h2>
            <ul id="results-list"></ul>
        </div>
        <div class="slider-container">
            <div class="slider">
                <!-- We'll populate this dynamically with JavaScript -->
            </div>
        </div>
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2024 Foodium. All rights reserved.</p>
            </div>
        </footer>
    


</div>                
<script>
    function getCookie(name) {
        const value = `; ${document.cookie}`;
        const parts = value.split(`; ${name}=`);
        if (parts.length === 2) return parts.pop().split(';').shift();
    }
    
    function handleAuthentication() {
        let token = getCookie('token');
        let isGoogleLogin = false;
    
        if (token) {
            isGoogleLogin = true;
            console.log('User is authenticated with Google. Token:', token);
        } else {
            token = localStorage.getItem('token');
            if (token) {
                console.log('User is authenticated manually. Token:', token);
            } else {
                console.log('User is not authenticated');
                return; 
            }
        }
    
        const payload = JSON.parse(atob(token.split('.')[1]));
    
        
        localStorage.setItem('token', token);
        localStorage.setItem('userId', payload.ID);
        localStorage.setItem('userEmail', payload.email);
        localStorage.setItem('userName', payload.name);
    
        if (isGoogleLogin) {
            console.log('Processed Google login');
        } else {
            console.log('Processed manual login');
        }
    }
    
    handleAuthentication();
    </script>
    
    <script>
    // JavaScript function to handle the button click and redirect
    document.getElementById("update-profile-butn").addEventListener("click", function() {
        window.location.href = "updtprofile.html"; // Replace with the URL of the page you want to redirect to
    });
    </script>
    <script src="customer.js"></script>
</body>
</html>